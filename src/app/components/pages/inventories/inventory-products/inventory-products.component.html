<p *ngIf="inventory">Inventory ID: {{ inventory.id }}</p>

<div id="main">
  <h3>Products</h3>
  <p>Search, edit or delete a product:</p>

  <div class="search">
    <input
      type="text"
      placeholder="Search ID"
      [(ngModel)]="searchId"
      name="searchId"
    />
    <button class="search-button" (click)="onSearchById()">Search</button>
  </div>

  <div *ngIf="foundProduct">
    <h4>Product Found:</h4>
    <h3>Update Product</h3>
    <form [formGroup]="productFormUpdate" (ngSubmit)="onUpdateProduct()">
      <div class="form-group">
        <label for="name">Name</label>
        <input type="text" id="name" formControlName="name" />
      </div>

      <div class="form-group">
        <label for="description">Description</label>
        <input type="text" id="description" formControlName="description" />
      </div>

      <div class="form-group">
        <label for="price">Price</label>
        <input type="number" id="price" formControlName="price" />
      </div>

      <div class="form-group">
        <label for="image">Image</label>
        <input type="file" id="image" (change)="onFileSelected($event)" />
      </div>

      <div class="form-group">
        <label for="category">Category</label>
        <input type="text" id="category" formControlName="category" />
      </div>

      <div class="form-group">
        <label for="tags">Tags</label>
        <textarea id="tags" formControlName="tags"></textarea>
      </div>

      <div class="form-group">
        <label for="date_added">Date Added</label>
        <input
          type="datetime-local"
          id="date_added"
          formControlName="date_added"
        />
      </div>

      <div class="form-group">
        <label>Is Featured</label>
        <div class="checkbox-group">
          <label>
            <input type="radio" value="yes" formControlName="is_featured" /> Yes
          </label>
          <label>
            <input type="radio" value="no" formControlName="is_featured" /> No
          </label>
        </div>
      </div>

      <div class="form-group">
        <label for="stock">Stock</label>
        <input type="number" id="stock" formControlName="stock" />
      </div>

      <div class="action-buttons">
        <button
          class="btn btn-danger"
          type="button"
          (click)="onDeleteProduct()"
        >
          üóë Eliminar
        </button>
        <button class="btn btn-primary" type="submit">‚úèÔ∏è Actualizar</button>
      </div>
    </form>
  </div>

  <p>Search products by query</p>
  <div class="search">
    <input
      type="text"
      placeholder="Search query"
      [(ngModel)]="searchQuery"
      name="searchQuery"
    />
    <button class="search-button" (click)="onSearchByQuery()">Search</button>
  </div>

  <div *ngIf="foundProducts.length > 0">
    <p>Page {{ currentPage }} / {{ lastPage }}</p>
    <h4>Products Found:</h4>
    <ul>
      <li *ngFor="let p of foundProducts">
        {{ p["id"] || "-" }} - {{ p.fields["name"] || "-" }} -
        {{ p.fields["category"] || "-" }} - ${{ p.fields["price"] || "-" }}
      </li>
    </ul>

    <div class="pagination-buttons">
      <button
        class="btn btn-primary"
        (click)="previousPage()"
        [disabled]="currentPage <= 1"
      >
        Anterior
      </button>
      <button
        class="btn btn-primary"
        (click)="nextPage()"
        [disabled]="currentPage >= lastPage"
      >
        Siguiente
      </button>
    </div>
  </div>

  <h3>Create product</h3>
</div>

<div id="create-product">
  <form [formGroup]="productForm" (ngSubmit)="onCreateProduct()">
    <div class="form-group">
      <label for="name">Name</label>
      <input
        type="text"
        id="name"
        formControlName="name"
        placeholder="Enter product name"
      />
    </div>

    <div class="form-group">
      <label for="description">Description</label>
      <input
        type="text"
        id="description"
        formControlName="description"
        placeholder="Enter product description"
      />
    </div>

    <div class="form-group">
      <label for="price">Price</label>
      <input
        type="number"
        id="price"
        formControlName="price"
        placeholder="Enter product price"
      />
    </div>

    <div class="form-group">
      <label for="image">Image</label>
      <input
        type="file"
        id="image"
        (change)="onFileSelected($event)"
        accept="image/*"
      />
    </div>

    <div class="form-group">
      <label for="category">Category</label>
      <input
        type="text"
        id="category"
        formControlName="category"
        placeholder="Enter product category"
      />
    </div>

    <div class="form-group">
      <label for="tags">Tags</label>
      <textarea
        id="tags"
        formControlName="tags"
        placeholder="Enter product tags"
      ></textarea>
    </div>

    <div class="form-group">
      <label for="date_added">Date Added</label>
      <input
        type="datetime-local"
        id="date_added"
        formControlName="date_added"
      />
    </div>

    <div class="form-group">
      <label>Is Featured</label>
      <div class="checkbox-group">
        <label>
          <input type="radio" value="yes" formControlName="is_featured" /> Yes
        </label>
        <label>
          <input type="radio" value="no" formControlName="is_featured" /> No
        </label>
      </div>
    </div>

    <div class="form-group">
      <label for="stock">Stock</label>
      <input
        type="number"
        id="stock"
        formControlName="stock"
        placeholder="Enter stock quantity"
      />
    </div>

    <button type="submit" class="create-button">Create Product</button>
  </form>
</div>
